@keyframes slideFadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* --------- Stagger par SECTION ---------
   On scope tout à .restaurant-page pour éviter les effets ailleurs. */
.restaurant-page {

  /* Chaque section a la même anim, la diff vient du delay */
  .main-container > .menu-section {
    opacity: 0;
    transform: translateY(12px);
    animation: slideFadeUp $section-duration ease-out forwards;
    will-change: opacity, transform; // fluidité

    /* Titre + petite barre apparaissent après la section */
    > h2,
    > .border-bottom {
      opacity: 0;
      transform: translateY(6px);
      animation: slideFadeUp 380ms ease-out forwards;
    }
    > h2 { animation-delay: calc(var(--d) + 80ms); }
    > .border-bottom { animation-delay: calc(var(--d) + 140ms); }

    /* Les plats (boutons) apparaissent un par un */
    .menu-button {
      opacity: 0;
      transform: translateY(8px);
      animation: slideFadeUp $item-duration ease-out forwards;
    }
  }

  /* Délais progressifs par section : on pose une var CSS --d sur chaque section,
     calculée côté Sass, puis on s’en sert pour décaler ses enfants */
  @for $i from 1 through 10 {
    .main-container > .menu-section:nth-of-type(#{$i}) {
      --d: #{ $base-delay + ($i - 1) * ($section-duration + $section-gap) };
      animation-delay: var(--d);
    }
  }

  /* Stagger interne pour les boutons plats (compte les <button> uniquement) */
  @for $j from 1 through 12 {
    .main-container > .menu-section .menu-button:nth-of-type(#{$j}) {
      animation-delay: calc(var(--d) + #{$item-offset} + #{$item-gap * ($j - 1)});
    }
  }

  /* Accessibilité */
  @media (prefers-reduced-motion: reduce) {
    .main-container > .menu-section,
    .main-container > .menu-section > h2,
    .main-container > .menu-section > .border-bottom,
    .main-container > .menu-section .menu-button {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
  }
}
